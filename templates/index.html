{% extends "base.html" %}

{% block content %}
<div class="input-section">
    <form method="POST" enctype="multipart/form-data" class="upload-form">
        <div class="form-group">
            <label for="image" class="upload-label">
                <span class="upload-text">Upload an image</span>
                <input type="file" name="image" id="image" accept="image/*" required style="display: none;">
            </label>
            <div class="file-name" id="file-name">No file selected</div>
        </div>

        <div class="form-group">
            <label for="text_type" class="toggle-label">Text type:</label>
            <select name="text_type" id="text_type" class="text-type-select">
                <option value="ocr">Machine Printed Text</option>
                <option value="htr">Handwritten Text</option>
            </select>
        </div>

        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="translate" id="translate" value="1">
                Translate pre-revolutionary Russian to post-revolutionary
            </label>
        </div>

        <button type="submit" class="submit-btn" id="submit-btn">Process</button>
    </form>
</div>

<div class="legend">
    <h3>NER Tags Legend:</h3>
    <ul>
        <li><span class="legend-mark ner-per"></span> PER</li>
        <li><span class="legend-mark ner-loc"></span> LOC</li>
        <li><span class="legend-mark ner-org"></span> ORG</li>
        <li><span class="legend-mark ner-date"></span> DATE</li>
    </ul>
</div>
{% endblock %}

{% block scripts %}
<script>
    const fileInput = document.getElementById('image');
    const fileNameDisplay = document.getElementById('file-name');
    const submitBtn = document.getElementById('submit-btn');

    fileInput.addEventListener('change', function() {
        if (fileInput.files.length > 0) {
            fileNameDisplay.textContent = fileInput.files[0].name;
            submitBtn.disabled = false;
        } else {
            fileNameDisplay.textContent = 'No file selected';
            submitBtn.disabled = true;
        }
    });

    // Инициализация состояния кнопки при загрузке страницы
    if (fileInput.files.length === 0) {
        submitBtn.disabled = true;
    }
</script>
{% endblock %}